handle duplicate users
handle host switching